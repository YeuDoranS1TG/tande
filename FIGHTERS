#include <bits/stdc++.h>
using namespace std;
#define maxN 100000
vector<int>v[maxN+5];
bool visited[maxN+5];
int a[maxN+5];
pair<int,int> bfs(int start) {
    int cnt1 = 0, cnt2 = 0;
    queue<int> q;
    visited[start] = true;
    q.push(start);
    while (!q.empty()) {
        int u = q.front(); q.pop();
        if (a[u] == 1) ++cnt1;
        else if (a[u] == 2) ++cnt2;

        for (auto x : v[u]) {
            if (!visited[x]) {
                a[x] = 3 - a[u];
                visited[x] = true;
                q.push(x);
            }
        }
    }
    return {cnt1, cnt2};
}
int main()
{
    ios::sync_with_stdio(0);
    cin.tie(0); cout.tie(0);
    freopen("FIGHTERS.INP","r",stdin);
    freopen("FIGHTERS.OUT","w",stdout);
    int t;
    cin>>t;
    while (t--){
        int n;
        cin>>n;
        int val=-1;
        vector<pair<int, int>>d;
        d.reserve(n);
        for (int i=0;i<n;++i) {
            int x,y;
            cin>>x>>y;
            d.push_back({x,y});
            val = max(val,max(x,y));
        }
        for (int i=0;i<=val;++i) {
            v[i].clear();
            visited[i]=false;
            a[i]=0;
        }
        for (auto [x, y] : d) {
            v[x].push_back(y);
            v[y].push_back(x);
        }
        fill(visited,visited+val+1,false);
        long long ans=0;
        for (int i=1;i<=val;++i){
            if (!visited[i] && !v[i].empty()) {
                a[i]=1;
                pair<int,int> p = bfs(i);
                ans += max(p.first, p.second);
            }
        }
        cout<<ans<<'\n';
    }
    return 0;
}
